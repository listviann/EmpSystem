<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width" />
        <title>EmpSystem</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    </head>
    <body>
        <h2>Employees list</h2>
        <form name="employeesForm">
            <input type="hidden" name="id" value="0" />
            <div class="mb-3">
                <label class="form-label" for="firstName">First name:</label>
                <input class="form-control" name="firstName" />
            </div>
            <div class="mb-3">
                <label class="form-label" for="lastName">last name:</label>
                <input class="form-control" name="lastName" />
            </div>
            <div class="mb-3">
                <label class="form-label" for="position">Position: </label>
                <select name="position">
                    <option value="low">Low</option>
                    <option value="middle">Middle</option>
                    <option value="high">High</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="salary" class="form-label">Salary:</label>
                <input type="number" class="form-control" name="salary" />
            </div>
            <div class="mb-3">
                <label for="email" class="form-label">Email:</label>
                <input type="email" class="form-control" name="email" />
            </div>
            <div class="mb-3">
                <label for="phoneNumber" class="form-label">Phone number:</label>
                <input class="form-control" name="phoneNumber" />
            </div>
            <div class="mb-3">
                <label for="birthDate" class="form-label">Birth date:</label>
                <input type="date" class="form-control" name="birthDate" />
            </div>
            <div class="mb-3">
                <button type="submit" class="btn btn-sm btn-primary">Сохранить</button>
                <a id="reset" class="btn btn-sm btn-primary">Сбросить</a>
            </div>
        </form>
        <table class="table table-condensed table-striped table-bordered">
            <thead><tr><th>First name</th><th>Last name</th><th>Position</th><th>Salary</th><th>Email</th><th>Phone number</th><th>Birth date</th></tr></thead>
            <tbody>
            </tbody>
        </table>

        <script>
            async function getEmployees() {
                const response = await fetch("/empsystem/employees", {
                    method: "GET",
                    headers: { "Accept": "application/json" }
                });

                if (response.ok === true) {
                    const employees = await response.json();
                    const rows = document.querySelector("tbody");
                    employees.forEach(employee => rows.append(row(employee)));
                }
            }

            async function getEmployee(id) {
                const response = await fetch("/empsystem/employees" + id, {
                    method: "GET",
                    headers: { "Accept": "application/json" }
                });

                if (response.ok === true) {
                    const employee = await response.json();
                    const form = document.forms["employeesForm"];
                    form.elements["id"].value = user.id;
                    
                }
            }
        </script>
    </body>
</html>